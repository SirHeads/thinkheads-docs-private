---
Project: AI-Driven Website
Type: Specifications
Date: 2025-07-17
Spec-ID: SPEC-BACK
---

# ThinkHeads.ai Backend Specifications

## Overview
This document details the technical specifications for the backend of the thinkheads.ai website, corresponding to **SPEC-BACK** from **4.1.2 Specifications_Overview.md**. The backend provides API endpoints for LLM-powered chat navigation and sub-product integration, supporting requirements FR01 (chat-based navigation), FR03 (sub-product integration), and FR04 (session management). It is designed for solo development within a 20-hour/week schedule, using FastAPI on Linode for lightweight tasks and Ollama on Proxmox (LXC container `dockProd1`, 1 RTX 5060 Ti GPU, 32 GB RAM) for LLM processing.

## Technical Specifications
- **Technology**: Python/FastAPI for APIs, Ollama for LLM.
- **Hosting**: FastAPI in Docker on Linode; Ollama in `dockProd1` on Proxmox.
- **Features**:
  - Chat endpoint (`/api/chat`) processes user queries, returns sub-product links or documentation references (FR01).
  - Sub-product integration endpoints (e.g., `/api/learning_assistant`) redirect to services (FR03).
  - Session management stores chat history in PostgreSQL (FR04).
- **Configuration**:
  - FastAPI endpoints proxied via Nginx (`/api/`), secured by Cloudflare Tunnel.
  - Ollama uses fine-tuned `llama3` model with RAG pipeline, querying PostgreSQL embeddings.
- **Performance**: Chat response time <2s for 95% of queries, supporting 10 concurrent users (FR01, NFR03).

## Implementation Details
- **Development**: Code FastAPI in VS Code, push to Git on Proxmox, deploy via Docker on Linode.
- **RAG Pipeline**: Markdown embeddings generated by Ollama, stored in PostgreSQL, queried by FastAPI.
- **Testing**: Test Ollama locally in `dockTest1` (Proxmox), validate APIs on Linode.
- **Deployment**: FastAPI deployed via `docker-compose` on Linode; Ollama in `dockProd1` with GPU passthrough.
- **RAG Integration**: Store in `/docs/project_details/ai_driven_website/specifications/`, sync to Linode, embed in PostgreSQL for RAG queries.