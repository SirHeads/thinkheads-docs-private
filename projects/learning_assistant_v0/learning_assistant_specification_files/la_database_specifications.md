---
Project: Learning Assistant
Type: Specifications
Date: 2025-07-17
Spec-ID: SPEC-LA-DB
---

# Learning Assistant V0 Database Specifications

## Overview
This document details the technical specifications for the database of the Learning Assistant V0, corresponding to **SPEC-LA-DB** from **4.2.2 Learning_Assistant_Specifications_Overview.md**. The database stores notes, session data, and RAG embeddings, supporting requirements FR02 (note-taking system) and FR04 (session management). It is designed for solo development within a 20-hour/week schedule, hosted in LXC container `dockProd2` on Proxmox (16 GB RAM, NVMe storage) and mirrored on Linode, using PostgreSQL.

## Technical Specifications
- **Technology**: PostgreSQL.
- **Hosting**: LXC container `dockProd2` on Proxmox, mirrored on Linode for production.
- **Schema**:
  ```sql
  CREATE TABLE learning_sessions (
      session_id VARCHAR(36) PRIMARY KEY,
      user_id VARCHAR(36),
      query_history JSONB,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      expires_at TIMESTAMP
  );
  CREATE TABLE notes (
      note_id SERIAL PRIMARY KEY,
      session_id VARCHAR(36),
      content TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (session_id) REFERENCES learning_sessions(session_id)
  );
  CREATE TABLE rag_embeddings (
      document_id SERIAL PRIMARY KEY,
      document_path VARCHAR(255),
      embedding VECTOR(1536),
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  );
  ```
- **Features**:
  - Stores session data (query history) with 24-hour expiry (FR04).
  - Stores user notes as text, exportable as markdown, supporting 100+ notes per user (FR02).
  - Stores RAG embeddings for curated resources and markdown documents, used by Ollama for context-aware suggestions (FR01).
- **Security**: Encrypted connections via SSL, restricted access to FastAPI and Ollama.

## Implementation Details
- **Development**: Design schema in VS Code, apply via `psql` on Proxmox.
- **Testing**: Validate note storage, export, and RAG queries in `dockTest1` (Proxmox).
- **Deployment**: Deploy PostgreSQL in `dockProd2`, mirror to Linode via replication.
- **Dependencies**: Requires backend (SPEC-LA-BACK) for data input, AI-driven website for integration.
- **RAG Pipeline**: Embeddings generated by Ollama, stored in `rag_embeddings`, queried for resource suggestions.
- **RAG Integration**: Store in `/docs/projects/learning_assistant_specifications/`, sync to Linode, embed in PostgreSQL for RAG queries.